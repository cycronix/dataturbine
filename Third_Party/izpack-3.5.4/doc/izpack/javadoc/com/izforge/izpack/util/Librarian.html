<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_04) on Sat Jun 05 23:15:05 CEST 2004 -->
<TITLE>
Librarian
</TITLE>

<META NAME="keywords" CONTENT="com.izforge.izpack.util.Librarian class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="Librarian";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/izforge/izpack/util/Housekeeper.html" title="class in com.izforge.izpack.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/izforge/izpack/util/MultiLineLabel.html" title="class in com.izforge.izpack.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Librarian.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.izforge.izpack.util</FONT>
<BR>
Class Librarian</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by"><B>com.izforge.izpack.util.Librarian</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../com/izforge/izpack/util/CleanupClient.html" title="interface in com.izforge.izpack.util">CleanupClient</A></DD>
</DL>
<HR>
<DL>
<DT>public class <B>Librarian</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../com/izforge/izpack/util/CleanupClient.html" title="interface in com.izforge.izpack.util">CleanupClient</A></DL>

<P>
This class handles loading of native libraries. There must only be one
 instance of <code>Librarian</code> per Java runtime, therefore this class is
 implemented as a 'Singleton'. 
 <br><br>
 <code>Librarian</code> is capable of loading native libraries from a
 variety of different source locations. However, you should place your
 library files in the 'native' directory. The primary reason for supporting
 different source locations is to facilitate testing in a development
 environment, without the need to actually packing the application into
 a *.jar file.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0 / 1/30/02</DD>
<DT><B>Author:</B></DT>
  <DD>Elmar Grom</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#BLOCK_SIZE">BLOCK_SIZE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The block size used for reading and writing data, 4k.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#CLIENT_EXTENSION">CLIENT_EXTENSION</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The extension appended to the client name when searching for it as a
      resource.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#clients">clients</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A list of references to clients that use libraries that were
      extracted from a *.jar file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#extension">extension</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The extension to use for native libraries.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#FILE_PROTOCOL">FILE_PROTOCOL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to identify file URL protocols</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#JAR_PROTOCOL">JAR_PROTOCOL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to identify jar URL protocols</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#libraryNames">libraryNames</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A list of library names as they appear in the temporary directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;<A HREF="../../../../com/izforge/izpack/util/Librarian.html" title="class in com.izforge.izpack.util">Librarian</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#me">me</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The reference to the single instance of <code>Librarian</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#NATIVE">NATIVE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The default directory for native library files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#nativeDirectory">nativeDirectory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The directory that is used to hold all native libraries.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#TEMP_LOCATION_KEY">TEMP_LOCATION_KEY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The key used to retrieve the location of temporary files form the
      system properties.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#temporaryFileNames">temporaryFileNames</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A list of fully qualified library names.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#trackList">trackList</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A list that is used to track all libraries that have been loaded.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#Librarian()">Librarian</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This class is implemented as a 'Singleton'.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#cleanUp()">cleanUp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method attempts to remove all native libraries that have been
  temporarily created from the system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#extractFromJar(java.lang.String, java.lang.String, com.izforge.izpack.util.NativeLibraryClient)">extractFromJar</A></B>(java.lang.String&nbsp;name,
               java.lang.String&nbsp;destination,
               <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Makes an attempt to extract the named library from the jar file and to
 store it on the local file system for temporary use.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#getClientPath(java.lang.String, java.net.URL)">getClientPath</A></B>(java.lang.String&nbsp;name,
              java.net.URL&nbsp;clientURL)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the complete path (including file name) for the native library, 
 assuming the native library is located in the same directory from which
 the client was loaded.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../com/izforge/izpack/util/Librarian.html" title="class in com.izforge.izpack.util">Librarian</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an instance of <code>Librarian</code> to use.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#getNativePath(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)">getNativePath</A></B>(java.lang.String&nbsp;name,
              <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the complete path (including file name) for the native library, 
 assuming the native library is located in a directory where native
 libraries are ordinarily expected.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#getTempFileName(java.lang.String)">getTempFileName</A></B>(java.lang.String&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Builds a temporary file name for the native library.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#loaded(java.lang.String)">loaded</A></B>(java.lang.String&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Verifies if the library has already been loaded and keeps track of all
 libraries that are verified.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#loadLibrary(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)">loadLibrary</A></B>(java.lang.String&nbsp;name,
            <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads the requested library.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.InputStream</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#openInputStream(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)">openInputStream</A></B>(java.lang.String&nbsp;name,
                <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Opens an <code>InputStream</code> to the native library.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#setNativeDirectory(java.lang.String)">setNativeDirectory</A></B>(java.lang.String&nbsp;directory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the directory where <code>Librarian</code> will search for native
 files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/izforge/izpack/util/Librarian.html#strip(java.lang.String)">strip</A></B>(java.lang.String&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Strips the extension of the library name, if it has one.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="JAR_PROTOCOL"><!-- --></A><H3>
JAR_PROTOCOL</H3>
<PRE>
private static final java.lang.String <B>JAR_PROTOCOL</B></PRE>
<DL>
<DD>Used to identify jar URL protocols
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.JAR_PROTOCOL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="FILE_PROTOCOL"><!-- --></A><H3>
FILE_PROTOCOL</H3>
<PRE>
private static final java.lang.String <B>FILE_PROTOCOL</B></PRE>
<DL>
<DD>Used to identify file URL protocols
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.FILE_PROTOCOL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TEMP_LOCATION_KEY"><!-- --></A><H3>
TEMP_LOCATION_KEY</H3>
<PRE>
private static final java.lang.String <B>TEMP_LOCATION_KEY</B></PRE>
<DL>
<DD>The key used to retrieve the location of temporary files form the
      system properties.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.TEMP_LOCATION_KEY">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CLIENT_EXTENSION"><!-- --></A><H3>
CLIENT_EXTENSION</H3>
<PRE>
private static final java.lang.String <B>CLIENT_EXTENSION</B></PRE>
<DL>
<DD>The extension appended to the client name when searching for it as a
      resource. Since the client is an object, the extension should always
      be '.class'
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.CLIENT_EXTENSION">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="NATIVE"><!-- --></A><H3>
NATIVE</H3>
<PRE>
private static final java.lang.String <B>NATIVE</B></PRE>
<DL>
<DD>The default directory for native library files.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.NATIVE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="BLOCK_SIZE"><!-- --></A><H3>
BLOCK_SIZE</H3>
<PRE>
private static final int <B>BLOCK_SIZE</B></PRE>
<DL>
<DD>The block size used for reading and writing data, 4k.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.izforge.izpack.util.Librarian.BLOCK_SIZE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="me"><!-- --></A><H3>
me</H3>
<PRE>
private static <A HREF="../../../../com/izforge/izpack/util/Librarian.html" title="class in com.izforge.izpack.util">Librarian</A> <B>me</B></PRE>
<DL>
<DD>The reference to the single instance of <code>Librarian</code>. Used
      in static methods in place of <code>this</code>.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="trackList"><!-- --></A><H3>
trackList</H3>
<PRE>
private java.util.Vector <B>trackList</B></PRE>
<DL>
<DD>A list that is used to track all libraries that have been loaded.
      This list is used to ensure that each library is loaded only once.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="clients"><!-- --></A><H3>
clients</H3>
<PRE>
private java.util.Vector <B>clients</B></PRE>
<DL>
<DD>A list of references to clients that use libraries that were
      extracted from a *.jar file. This is needed because the clients
      need to be called for freeing their libraries.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="libraryNames"><!-- --></A><H3>
libraryNames</H3>
<PRE>
private java.util.Vector <B>libraryNames</B></PRE>
<DL>
<DD>A list of library names as they appear in the temporary directory.
      This is needed to free each library through the client. The index
      of each name corresponds to the index of the respective client in
      the <code>clients</code> list.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="temporaryFileNames"><!-- --></A><H3>
temporaryFileNames</H3>
<PRE>
private java.util.Vector <B>temporaryFileNames</B></PRE>
<DL>
<DD>A list of fully qualified library names. This is needed to delete
      the temporary library files after use. The index of each name
      corresponds to the index of the respective client in the
      <code>clients</code> list.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="extension"><!-- --></A><H3>
extension</H3>
<PRE>
private java.lang.String <B>extension</B></PRE>
<DL>
<DD>The extension to use for native libraries.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="nativeDirectory"><!-- --></A><H3>
nativeDirectory</H3>
<PRE>
private java.lang.String <B>nativeDirectory</B></PRE>
<DL>
<DD>The directory that is used to hold all native libraries.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="Librarian()"><!-- --></A><H3>
Librarian</H3>
<PRE>
private <B>Librarian</B>()</PRE>
<DL>
<DD>This class is implemented as a 'Singleton'. Therefore the constructor is
 private to prevent instantiation of this class. Use <code>getInstance()</code>
 to obtain an instance for use.
 <br><br>
 For more information about the 'Singleton' pattern I highly recommend
 the book Design Patterns by Gamma, Helm, Johnson and Vlissides 
 ISBN 0-201-63361-2.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../../../com/izforge/izpack/util/Librarian.html" title="class in com.izforge.izpack.util">Librarian</A> <B>getInstance</B>()</PRE>
<DL>
<DD>Returns an instance of <code>Librarian</code> to use.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>an instance of <code>Librarian</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="loadLibrary(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)"><!-- --></A><H3>
loadLibrary</H3>
<PRE>
public void <B>loadLibrary</B>(java.lang.String&nbsp;name,
                        <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)
                 throws java.lang.Exception</PRE>
<DL>
<DD>Loads the requested library. If the library is already loaded, this
 method returns immediately, without an attempt to load the library again. 
 <br><br>
 <b>Invocation Example:</b>
 This assumes that the call is made from the class that links with the
 library. If this is not the case, <code>this</code> must be replaced by
 the reference of the class that links with the library.
 <br><br><code>
 Librarian.getInstance ().loadLibrary ("MyLibrary", this);
 </code>
 <br><br>
 Loading of a native library file works as follows:<br>
 <ul>
 <li>If the library is already loaded there is nothing to do.
 <li>An attempt is made to load the library by its name. If there is no
     system path set to the library, this attempt will fail.
 <li>If the client is located on the local file system, an attempt is
     made to load the library from the local files system as well.
 <li>If the library is located inside a *.jar file, it is extracted to
     'java.io.tmpdir' and an attempt is made to load it from there.
 </ul>
 <br><br>
 Loading from the local file system and from the *.jar file is attempted
 for the following potential locations of the library in this order:<br>
 <ol>
 <li>The same directory where the client is located
 <li>The native library directory
 </ol>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the name of the library. A file extension and path
                       are not needed, in fact if supplied, both is
                       stripped off. A specific extension is
                       appended.<DD><CODE>client</CODE> - the object that made the load request
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if all attempts to load the library fail.<DT><B>See Also:</B><DD><A HREF="../../../../com/izforge/izpack/util/Librarian.html#setNativeDirectory(java.lang.String)"><CODE>setNativeDirectory(java.lang.String)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="loaded(java.lang.String)"><!-- --></A><H3>
loaded</H3>
<PRE>
private boolean <B>loaded</B>(java.lang.String&nbsp;name)</PRE>
<DL>
<DD>Verifies if the library has already been loaded and keeps track of all
 libraries that are verified.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - name of the library to verify
<DT><B>Returns:</B><DD><code>true</code> if the library had already been loaded,
            otherwise <code>false</code>.</DL>
</DD>
</DL>
<HR>

<A NAME="strip(java.lang.String)"><!-- --></A><H3>
strip</H3>
<PRE>
private java.lang.String <B>strip</B>(java.lang.String&nbsp;name)</PRE>
<DL>
<DD>Strips the extension of the library name, if it has one.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the name of the library
<DT><B>Returns:</B><DD>the name without an extension</DL>
</DD>
</DL>
<HR>

<A NAME="extractFromJar(java.lang.String, java.lang.String, com.izforge.izpack.util.NativeLibraryClient)"><!-- --></A><H3>
extractFromJar</H3>
<PRE>
private void <B>extractFromJar</B>(java.lang.String&nbsp;name,
                            java.lang.String&nbsp;destination,
                            <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)
                     throws java.lang.Exception</PRE>
<DL>
<DD>Makes an attempt to extract the named library from the jar file and to
 store it on the local file system for temporary use. If the attempt is
 successful, the fully qualified file name of the library on the local
 file system is returned.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the simple name of the library<DD><CODE>destination</CODE> - the fully qualified name of the destination file.<DD><CODE>client</CODE> - the class that made the load request.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if the library can not be extracted from
                       the *.jar file.
<DD><CODE>java.io.FileNotFoundException</CODE> - if the *.jar file does not exist. The
                                  way things operate here, this should
                                  actually never happen.</DL>
</DD>
</DL>
<HR>

<A NAME="getClientPath(java.lang.String, java.net.URL)"><!-- --></A><H3>
getClientPath</H3>
<PRE>
private java.lang.String <B>getClientPath</B>(java.lang.String&nbsp;name,
                                       java.net.URL&nbsp;clientURL)</PRE>
<DL>
<DD>Returns the complete path (including file name) for the native library, 
 assuming the native library is located in the same directory from which
 the client was loaded.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the simple name of the library<DD><CODE>clientURL</CODE> - a URL that points to the client class
<DT><B>Returns:</B><DD>the path to the client</DL>
</DD>
</DL>
<HR>

<A NAME="getNativePath(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)"><!-- --></A><H3>
getNativePath</H3>
<PRE>
private java.lang.String <B>getNativePath</B>(java.lang.String&nbsp;name,
                                       <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)</PRE>
<DL>
<DD>Returns the complete path (including file name) for the native library, 
 assuming the native library is located in a directory where native
 libraries are ordinarily expected.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the simple name of the library<DD><CODE>client</CODE> - the class that made the load request.
<DT><B>Returns:</B><DD>the path to the location of the native libraries.</DL>
</DD>
</DL>
<HR>

<A NAME="openInputStream(java.lang.String, com.izforge.izpack.util.NativeLibraryClient)"><!-- --></A><H3>
openInputStream</H3>
<PRE>
private java.io.InputStream <B>openInputStream</B>(java.lang.String&nbsp;name,
                                            <A HREF="../../../../com/izforge/izpack/util/NativeLibraryClient.html" title="interface in com.izforge.izpack.util">NativeLibraryClient</A>&nbsp;client)
                                     throws java.lang.Exception</PRE>
<DL>
<DD>Opens an <code>InputStream</code> to the native library.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the simple name of the library<DD><CODE>client</CODE> - the class that made the load request.
<DT><B>Returns:</B><DD>an <code>InputStream</code> from which the library can be read.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if the library can not be located.</DL>
</DD>
</DL>
<HR>

<A NAME="getTempFileName(java.lang.String)"><!-- --></A><H3>
getTempFileName</H3>
<PRE>
private java.lang.String <B>getTempFileName</B>(java.lang.String&nbsp;name)</PRE>
<DL>
<DD>Builds a temporary file name for the native library.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - the file name of the library
<DT><B>Returns:</B><DD>a fully qualified file name that can be used to store the file
            on the local file system.</DL>
</DD>
</DL>
<HR>

<A NAME="setNativeDirectory(java.lang.String)"><!-- --></A><H3>
setNativeDirectory</H3>
<PRE>
public void <B>setNativeDirectory</B>(java.lang.String&nbsp;directory)</PRE>
<DL>
<DD>Sets the directory where <code>Librarian</code> will search for native
 files. Directories are denoted relative to the root, where the root is
 the same location where the top level Java package directory is located
 (usually called <code>com</code>). The default directory is
 <code>native</code>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>directory</CODE> - the directory where native files are located.</DL>
</DD>
</DL>
<HR>

<A NAME="cleanUp()"><!-- --></A><H3>
cleanUp</H3>
<PRE>
public void <B>cleanUp</B>()</PRE>
<DL>
<DD>This method attempts to remove all native libraries that have been
  temporarily created from the system.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/izforge/izpack/util/CleanupClient.html#cleanUp()">cleanUp</A></CODE> in interface <CODE><A HREF="../../../../com/izforge/izpack/util/CleanupClient.html" title="interface in com.izforge.izpack.util">CleanupClient</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/izforge/izpack/util/Housekeeper.html" title="class in com.izforge.izpack.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/izforge/izpack/util/MultiLineLabel.html" title="class in com.izforge.izpack.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Librarian.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
